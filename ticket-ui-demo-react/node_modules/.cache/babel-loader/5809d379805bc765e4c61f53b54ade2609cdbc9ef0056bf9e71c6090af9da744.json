{"ast":null,"code":"import { useCallback, useEffect, useRef } from 'react';\n/**\n * @typedef {object} StreamHook\n * @property {function()} close - Close the stream\n */\n\n/**\n * React hook for the [Streams API](https://developer.mozilla.org/en-US/docs/Web/API/Streams_API).\n * Use this hook to stream data from a URL.\n * @param {string} url\n * @param {object} [params]\n * @param {function(Response)} [params.onNext]\n * @param {function(Error)} [params.onError]\n * @param {function()} [params.onDone]\n * @param {RequestInit} [params.fetchParams]\n *\n * @returns {StreamHook}\n */\n\nexport function useStream(url, params) {\n  if (typeof params !== 'object' || params === null) {\n    params = {};\n  }\n  const streamRef = useRef();\n  const onNext = useRef(params.onNext);\n  const onError = useRef(params.onError);\n  const onDone = useRef(params.onDone);\n  const close = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.abort();\n    }\n  }, []);\n  useEffect(() => {\n    if (streamRef.current) {\n      streamRef.current.abort();\n    }\n    streamRef.current = new AbortController();\n    startStream(url, {\n      onNext: onNext,\n      onError: onError,\n      onDone: onDone,\n      fetchParams: {\n        ...params.fetchParams,\n        signal: streamRef.current.signal\n      }\n    });\n  }, [url, params.fetchParams]);\n  useEffect(() => {\n    onNext.current = params.onNext;\n  }, [params.onNext]);\n  useEffect(() => {\n    onError.current = params.onError;\n  }, [params.onError]);\n  useEffect(() => {\n    onDone.current = params.onDone;\n  }, [params.onDone]);\n  return {\n    close\n  };\n}\n/**\n * Use this function to start streaming data from an URL\n * @param {string} url\n * @param {object} params\n * @param {React.MutableRefObject<function(Response)>} params.onNext\n * @param {React.MutableRefObject<function(Error)>} params.onError\n * @param {React.MutableRefObject<function()>} params.onDone\n * @param {RequestInit} params.fetchParams\n */\n\nasync function startStream(url, _ref) {\n  let {\n    onNext,\n    onError,\n    onDone,\n    fetchParams\n  } = _ref;\n  const errCb = err => {\n    if (typeof onError.current === 'function') {\n      onError.current(err);\n    }\n  };\n  try {\n    const res = await fetch(url, {\n      ...fetchParams,\n      method: 'GET'\n    });\n    const reader = res.body.getReader();\n    if (fetchParams.signal instanceof AbortSignal) {\n      fetchParams.signal.addEventListener('abort', evt => reader.cancel(evt), {\n        once: true,\n        passive: true\n      });\n    } // eslint-disable-next-line no-constant-condition\n\n    while (true) {\n      try {\n        const {\n          done,\n          value\n        } = await reader.read();\n        if (done) {\n          if (typeof onDone.current === 'function') {\n            onDone.current();\n          }\n          return;\n        }\n        const res = new Response(value);\n        if (typeof onNext.current === 'function') {\n          onNext.current(res);\n        }\n      } catch (e) {\n        errCb(e);\n        return;\n      }\n    }\n  } catch (e) {\n    errCb(e);\n  }\n}","map":{"version":3,"names":["useCallback","useEffect","useRef","useStream","url","params","streamRef","onNext","onError","onDone","close","current","abort","AbortController","startStream","fetchParams","signal","errCb","err","res","fetch","method","reader","body","getReader","AbortSignal","addEventListener","evt","cancel","once","passive","done","value","read","Response","e"],"sources":["C:/Users/2234373/Documents/Verizon/TicketDemo/ui/ticket-ui/node_modules/react-fetch-streams/dist/es/stream.js"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\n/**\n * @typedef {object} StreamHook\n * @property {function()} close - Close the stream\n */\n\n/**\n * React hook for the [Streams API](https://developer.mozilla.org/en-US/docs/Web/API/Streams_API).\n * Use this hook to stream data from a URL.\n * @param {string} url\n * @param {object} [params]\n * @param {function(Response)} [params.onNext]\n * @param {function(Error)} [params.onError]\n * @param {function()} [params.onDone]\n * @param {RequestInit} [params.fetchParams]\n *\n * @returns {StreamHook}\n */\n\nexport function useStream(url, params) {\n  if (typeof params !== 'object' || params === null) {\n    params = {};\n  }\n\n  const streamRef = useRef();\n  const onNext = useRef(params.onNext);\n  const onError = useRef(params.onError);\n  const onDone = useRef(params.onDone);\n  const close = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.abort();\n    }\n  }, []);\n  useEffect(() => {\n    if (streamRef.current) {\n      streamRef.current.abort();\n    }\n\n    streamRef.current = new AbortController();\n    startStream(url, {\n      onNext: onNext,\n      onError: onError,\n      onDone: onDone,\n      fetchParams: { ...params.fetchParams,\n        signal: streamRef.current.signal\n      }\n    });\n  }, [url, params.fetchParams]);\n  useEffect(() => {\n    onNext.current = params.onNext;\n  }, [params.onNext]);\n  useEffect(() => {\n    onError.current = params.onError;\n  }, [params.onError]);\n  useEffect(() => {\n    onDone.current = params.onDone;\n  }, [params.onDone]);\n  return {\n    close\n  };\n}\n/**\n * Use this function to start streaming data from an URL\n * @param {string} url\n * @param {object} params\n * @param {React.MutableRefObject<function(Response)>} params.onNext\n * @param {React.MutableRefObject<function(Error)>} params.onError\n * @param {React.MutableRefObject<function()>} params.onDone\n * @param {RequestInit} params.fetchParams\n */\n\nasync function startStream(url, {\n  onNext,\n  onError,\n  onDone,\n  fetchParams\n}) {\n  const errCb = err => {\n    if (typeof onError.current === 'function') {\n      onError.current(err);\n    }\n  };\n\n  try {\n    const res = await fetch(url, { ...fetchParams,\n      method: 'GET'\n    });\n    const reader = res.body.getReader();\n\n    if (fetchParams.signal instanceof AbortSignal) {\n      fetchParams.signal.addEventListener('abort', evt => reader.cancel(evt), {\n        once: true,\n        passive: true\n      });\n    } // eslint-disable-next-line no-constant-condition\n\n\n    while (true) {\n      try {\n        const {\n          done,\n          value\n        } = await reader.read();\n\n        if (done) {\n          if (typeof onDone.current === 'function') {\n            onDone.current();\n          }\n\n          return;\n        }\n\n        const res = new Response(value);\n\n        if (typeof onNext.current === 'function') {\n          onNext.current(res);\n        }\n      } catch (e) {\n        errCb(e);\n        return;\n      }\n    }\n  } catch (e) {\n    errCb(e);\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}